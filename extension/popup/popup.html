<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasePath</title>
    <link rel="stylesheet" href="popup.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header with tabs -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">‚ö°</span>
                <span class="logo-text">EasePath</span>
            </div>
            <div class="header-actions">
                <button id="settings-btn" class="icon-btn" title="Settings">‚öôÔ∏è</button>
            </div>
        </header>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-tab="autofill">‚ú® Auto Apply</button>
            <button class="tab" data-tab="profile">üë§ Profile</button>
        </div>

        <!-- Autofill Tab -->
        <div id="autofill-tab" class="tab-content active">
            <!-- Not Connected State -->
            <div id="not-connected" class="section">
                <div class="info-card warning">
                    <div class="info-icon">üîó</div>
                    <div class="info-content">
                        <strong>Not Connected</strong>
                        <p>Please log in to EasePath website first, then click below to sync.</p>
                    </div>
                </div>
                <button id="sync-btn" class="primary-btn full-width">
                    üîÑ Sync with EasePath
                </button>
                <p class="help-text">
                    Don't have an account? <a href="http://localhost:5173" target="_blank">Sign up here</a>
                </p>
            </div>

            <!-- Connected State -->
            <div id="connected" class="section hidden">
                <!-- Auto-Apply Toggle -->
                <div class="auto-apply-section">
                    <div class="auto-apply-header">
                        <div class="auto-apply-title">
                            <span>üöÄ</span>
                            Auto-Apply Mode
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="auto-apply-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <p class="auto-apply-description">
                        When enabled, AI will fill ALL fields and automatically submit the application for you.
                    </p>
                </div>

                <!-- AI Feature Banner -->
                <div class="feature-banner" id="feature-banner">
                    <div class="feature-header">
                        <span class="feature-icon">üß†</span>
                        <span class="feature-title">AI-Powered Smart Fill</span>
                        <button id="close-banner" class="close-btn">√ó</button>
                    </div>
                    <ul class="feature-list">
                        <li>AI learns from your applications to improve accuracy</li>
                        <li>Automatically fills forms using your profile data</li>
                        <li>Uploads your resume to job sites automatically</li>
                        <li>Your data is securely stored and never shared</li>
                    </ul>
                </div>

                <!-- Main Action Card -->
                <div class="action-card">
                    <div class="action-header">
                        <span class="action-icon">‚ö°</span>
                        <div class="action-text">
                            <strong>Ready to apply!</strong>
                            <span id="stats-text" class="stats">Scanning page...</span>
                        </div>
                    </div>
                    <button id="autofill-btn" class="autofill-btn">
                        ‚ú® Fill & Apply Now
                    </button>
                </div>

                <!-- Status Messages -->
                <div id="message-area" class="message-area hidden"></div>

                <!-- Learning Progress Section -->
                <div class="learning-section">
                    <div class="learning-header">
                        <span class="learning-icon">üìö</span>
                        <span class="learning-title">AI Learning Progress</span>
                    </div>
                    <div class="learning-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="learning-progress" style="width: 0%"></div>
                        </div>
                        <span class="progress-text" id="learning-text">0 patterns learned</span>
                    </div>
                </div>

                <!-- Resume Section -->
                <div class="resume-section">
                    <div class="section-header">
                        <span class="section-icon">üìÑ</span>
                        <span class="section-title">Resume</span>
                    </div>
                    <div class="resume-info">
                        <span id="resume-name" class="resume-name">No resume uploaded</span>
                        <button id="view-resume-btn" class="icon-btn small hidden">üëÅÔ∏è</button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button id="feedback-btn" class="action-link">
                        <span>‚úì</span> Worked!
                    </button>
                    <button id="report-btn" class="action-link">
                        <span>üö©</span> Report Issue
                    </button>
                </div>
            </div>
        </div>

        <!-- Profile Tab -->
        <div id="profile-tab" class="tab-content">
            <div id="profile-not-connected" class="section">
                <div class="info-card">
                    <div class="info-icon">üë§</div>
                    <div class="info-content">
                        <strong>Connect to view profile</strong>
                        <p>Link your EasePath account to see your profile details.</p>
                    </div>
                </div>
            </div>
            
            <div id="profile-connected" class="section hidden">
                <div class="profile-header">
                    <div class="avatar" id="avatar">?</div>
                    <div class="profile-info">
                        <strong id="profile-name">Loading...</strong>
                        <span id="profile-email" class="profile-email">Loading...</span>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="stat">
                        <span class="stat-value" id="fields-count">0</span>
                        <span class="stat-label">Profile Fields</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="applications-count">0</span>
                        <span class="stat-label">Applications</span>
                    </div>
                </div>

                <!-- Learning Stats -->
                <div class="learning-section">
                    <div class="learning-header">
                        <span class="learning-icon">üéØ</span>
                        <span class="learning-title">Success Rate</span>
                    </div>
                    <div class="learning-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="success-rate" style="width: 0%"></div>
                        </div>
                        <span class="progress-text" id="success-text">--%</span>
                    </div>
                </div>

                <div class="profile-actions">
                    <a href="http://localhost:5173/settings" target="_blank" class="secondary-btn full-width">
                        ‚úèÔ∏è Edit Profile
                    </a>
                    <a href="http://localhost:5173/dashboard" target="_blank" class="secondary-btn full-width">
                        üìä View Dashboard
                    </a>
                    <button id="disconnect-btn" class="text-btn">
                        Disconnect Account
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <span>EasePath v1.1</span>
            <a href="http://localhost:5173/dashboard" target="_blank">Dashboard ‚Üí</a>
        </footer>
    </div>
    <script src="popup.js"></script>
</body>
</html>
